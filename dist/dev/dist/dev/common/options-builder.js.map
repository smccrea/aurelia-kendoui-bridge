{"version":3,"sources":["common/options-builder.js"],"names":["inject","ControlProperties","Util","OptionsBuilder","controlProperties","util","getOptions","viewModel","className","options","props","getProperties","beforeOptionsBuild","i","length","prop","value","getBindablePropertyName","hasValue","afterOptionsBuild","pruneOptions"],"mappings":";;;;;;;;;;;;;AAAQA,Y,+BAAAA,M;;AACAC,uB,sBAAAA,iB;;AACAC,U,SAAAA,I;;;gCAOKC,c,WADZH,OAAOC,iBAAP,EAA0BC,IAA1B,C;AAEC,gCAAYE,iBAAZ,EAAkDC,IAAlD,EAA8D;AAAA;;AAC5D,eAAKD,iBAAL,GAAyBA,iBAAzB;AACA,eAAKC,IAAL,GAAYA,IAAZ;AACD;;iCAKDC,U,uBAAWC,S,EAAWC,S,EAAW;AAC/B,cAAIC,UAAU,EAAd;AACA,cAAIC,QAAQ,KAAKN,iBAAL,CAAuBO,aAAvB,CAAqCH,SAArC,CAAZ;;AAIA,cAAID,UAAUK,kBAAd,EAAkC;AAChCL,sBAAUK,kBAAV,CAA6BH,OAA7B;AACD;;AAED,eAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIH,MAAMI,MAA1B,EAAkCD,GAAlC,EAAuC;AACrC,gBAAIE,OAAOL,MAAMG,CAAN,CAAX;AACA,gBAAIG,QAAQT,UAAU,KAAKF,IAAL,CAAUY,uBAAV,CAAkCF,IAAlC,CAAV,CAAZ;;AAEA,gBAAI,KAAKV,IAAL,CAAUa,QAAV,CAAmBF,KAAnB,CAAJ,EAA+B;AAC7BP,sBAAQM,IAAR,IAAgBC,KAAhB;AACD;AACF;;AAID,cAAIT,UAAUY,iBAAd,EAAiC;AAC/BZ,sBAAUY,iBAAV,CAA4BV,OAA5B;AACD;;AAED,iBAAO,KAAKJ,IAAL,CAAUe,YAAV,CAAuBX,OAAvB,CAAP;AACD,S","file":"common/options-builder.js","sourceRoot":"/source/","sourcesContent":["import {inject} from 'aurelia-dependency-injection';\r\nimport {ControlProperties} from './control-properties';\r\nimport {Util} from './util';\r\n\r\n/***\r\n* Converts an object with bindable properties (with k- convention)\r\n* into an object that can be passed to a Kendo control\r\n*/\r\n@inject(ControlProperties, Util)\r\nexport class OptionsBuilder {\r\n  constructor(controlProperties: ControlProperties, util: Util) {\r\n    this.controlProperties = controlProperties;\r\n    this.util = util;\r\n  }\r\n\r\n  /**\r\n  * converts properties of view-model (with k- convention) to an object\r\n  */\r\n  getOptions(viewModel, className) {\r\n    let options = {};\r\n    let props = this.controlProperties.getProperties(className);\r\n\r\n    // allows view-models to do some pre processing\r\n    // for example, process all ak-templates\r\n    if (viewModel.beforeOptionsBuild) {\r\n      viewModel.beforeOptionsBuild(options);\r\n    }\r\n\r\n    for (let i = 0; i < props.length; i++) {\r\n      let prop = props[i];\r\n      let value = viewModel[this.util.getBindablePropertyName(prop)];\r\n\r\n      if (this.util.hasValue(value)) {\r\n        options[prop] = value;\r\n      }\r\n    }\r\n\r\n    // allows view-models to do some post processing\r\n    // used in ak-col to support nested columns\r\n    if (viewModel.afterOptionsBuild) {\r\n      viewModel.afterOptionsBuild(options);\r\n    }\r\n\r\n    return this.util.pruneOptions(options);\r\n  }\r\n}\r\n"]}