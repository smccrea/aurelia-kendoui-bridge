{"version":3,"sources":["common/observer.js"],"names":["transient","Observer","subscriptions","notify","evt","data","i","length","event","callback","subscribe","cb","subscription","push","dispose","unsubscribe","index","indexOf","splice"],"mappings":";;;;;;;;;;;;;AAAQA,e,+BAAAA,S;;;0BAGKC,Q,WADZD,W;;;;eAECE,a,GAAgB,E;;;2BAEhBC,M,mBAAOC,G,EAAKC,I,EAAM;AAChB,eAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKJ,aAAL,CAAmBK,MAAvC,EAA+CD,GAA/C,EAAoD;AAClD,gBAAI,KAAKJ,aAAL,CAAmBI,CAAnB,EAAsBE,KAAtB,KAAgCJ,GAApC,EAAyC;AACvC,mBAAKF,aAAL,CAAmBI,CAAnB,EAAsBG,QAAtB,CAA+BL,GAA/B,EAAoCC,IAApC;AACD;AACF;AACF,S;;2BAEDK,S,sBAAUN,G,EAAKO,E,EAAI;AAAA;;AACjB,cAAIC,eAAe,EAAEJ,OAAOJ,GAAT,EAAcK,UAAUE,EAAxB,EAAnB;;AAEA,eAAKT,aAAL,CAAmBW,IAAnB,CAAwBD,YAAxB;;AAEA,iBAAO;AACLE,qBAAS;AAAA,qBAAM,MAAKC,WAAL,CAAiBH,YAAjB,CAAN;AAAA;AADJ,WAAP;AAGD,S;;2BAEDG,W,wBAAYH,Y,EAAc;AACxB,cAAII,QAAQ,KAAKd,aAAL,CAAmBe,OAAnB,CAA2BL,YAA3B,CAAZ;;AAEA,cAAII,QAAQ,CAAC,CAAb,EAAgB;AACd,iBAAKd,aAAL,CAAmBgB,MAAnB,CAA0BF,KAA1B,EAAiC,CAAjC;AACD;AACF,S","file":"common/observer.js","sourceRoot":"/source/","sourcesContent":["import {transient} from 'aurelia-dependency-injection';\n\n@transient()\nexport class Observer {\n  subscriptions = [];\n\n  notify(evt, data) {\n    for (let i = 0; i < this.subscriptions.length; i++) {\n      if (this.subscriptions[i].event === evt) {\n        this.subscriptions[i].callback(evt, data);\n      }\n    }\n  }\n\n  subscribe(evt, cb) {\n    let subscription = { event: evt, callback: cb };\n\n    this.subscriptions.push(subscription);\n\n    return {\n      dispose: () => this.unsubscribe(subscription)\n    };\n  }\n\n  unsubscribe(subscription) {\n    let index = this.subscriptions.indexOf(subscription);\n\n    if (index > -1) {\n      this.subscriptions.splice(index, 1);\n    }\n  }\n}"]}