{"version":3,"sources":["common/control-properties.js"],"names":["bindables","inject","Util","ControlProperties","util","cache","getProperties","controlName","extraProperties","options1","getWidgetProperties","options2","getGeneratedProperties","keys","concat","filter","indexOf","item","Error","window","kendo","jQuery","fn","Object","widget","prototype","options","getTemplateProperties","properties","templates","isTemplateProperty","prop"],"mappings":";;;;;;;;;;;;;AAAQA,e,cAAAA,S;;AACAC,Y,+BAAAA,M;;AACAC,U,SAAAA,I;;;mCAOKC,iB,WADZF,OAAOC,IAAP,C;AAIC,mCAAYE,IAAZ,EAAwB;AAAA;;AAAA,eAFxBC,KAEwB,GAFhB,EAEgB;;AACtB,eAAKD,IAAL,GAAYA,IAAZ;AACD;;oCAQDE,a,0BAAcC,W,EAAqD;AAAA,cAAhCC,eAAgC,uEAAd,EAAc;;AACjE,cAAI,KAAKH,KAAL,CAAWE,WAAX,CAAJ,EAA6B;AAC3B,mBAAO,KAAKF,KAAL,CAAWE,WAAX,CAAP;AACD;;AAGD,cAAIE,WAAW,KAAKC,mBAAL,CAAyBH,WAAzB,CAAf;;AAEA,cAAII,WAAW,KAAKC,sBAAL,CAA4BL,WAA5B,CAAf;;AAGA,cAAIM,OAAOJ,SAASK,MAAT,CAAgBH,SAASI,MAAT,CAAgB;AAAA,mBAAQN,SAASO,OAAT,CAAiBC,IAAjB,IAAyB,CAAjC;AAAA,WAAhB,CAAhB,CAAX;AACAJ,iBAAOA,KAAKC,MAAL,CAAYN,gBAAgBO,MAAhB,CAAuB;AAAA,mBAAQF,KAAKG,OAAL,CAAaC,IAAb,IAAqB,CAA7B;AAAA,WAAvB,CAAZ,CAAP;;AAEA,eAAKZ,KAAL,CAAWE,WAAX,IAA0BM,IAA1B;;AAEA,iBAAOA,IAAP;AACD,S;;oCAODD,sB,mCAAuBL,W,EAAqB;AAC1C,cAAI,CAACP,UAAUO,WAAV,CAAL,EAA6B;AAC3B,kBAAM,IAAIW,KAAJ,CAAaX,WAAb,0CAAN;AACD;;AAED,iBAAOP,UAAUO,WAAV,CAAP;AACD,S;;oCAODG,mB,gCAAoBH,W,EAA+B;AACjD,cAAIY,OAAOC,KAAP,IAAgBA,MAAMC,MAAN,CAAaC,EAAb,CAAgBf,WAAhB,CAApB,EAAkD;AAChD,mBAAOgB,OAAOV,IAAP,CAAYO,MAAMC,MAAN,CAAaC,EAAb,CAAgBf,WAAhB,EAA6BiB,MAA7B,CAAoCC,SAApC,CAA8CC,OAA1D,CAAP;AACD;;AAED,iBAAO,EAAP;AACD,S;;oCAMDC,qB,kCAAsBpB,W,EAA+B;AAAA;;AACnD,cAAIqB,aAAa,KAAKtB,aAAL,CAAmBC,WAAnB,CAAjB;;AAEA,cAAIsB,YAAYD,WAAWb,MAAX,CAAkB;AAAA,mBAAQ,MAAKX,IAAL,CAAU0B,kBAAV,CAA6BC,IAA7B,CAAR;AAAA,WAAlB,CAAhB;;AAEA,iBAAOF,SAAP;AACD,S","file":"common/control-properties.js","sourceRoot":"/source/","sourcesContent":["import {bindables} from './bindables';\nimport {inject} from 'aurelia-dependency-injection';\nimport {Util} from './util';\n\n/***\n* Available properties (merged together from several locations) are stored here per controlName\n* so that this isn't done for each created wrapper instance\n*/\n@inject(Util)\nexport class ControlProperties {\n  cache = {};\n\n  constructor(util: Util) {\n    this.util = util;\n  }\n\n  /**\n  * Merges together available properties for a specific control\n  * and stores this in a cache so that this is done only once per control\n  * @param controlName the name of the kendo control (kendoGrid, kendoButton)\n  * @param extraProperties allows you to provide an extra list of available properties\n  */\n  getProperties(controlName: string, extraProperties = []): string[] {\n    if (this.cache[controlName]) {\n      return this.cache[controlName];\n    }\n\n    // get available properties of the options object inside a Kendo control\n    let options1 = this.getWidgetProperties(controlName);\n    // get available properties of the pre-generated bindables.json file\n    let options2 = this.getGeneratedProperties(controlName);\n\n    // merge together without duplicates\n    let keys = options1.concat(options2.filter(item => options1.indexOf(item) < 0));\n    keys = keys.concat(extraProperties.filter(item => keys.indexOf(item) < 0));\n\n    this.cache[controlName] = keys;\n\n    return keys;\n  }\n\n\n  /**\n  * returns a list of properties of a Kendo control that has been pre-generated (into bindables.js)\n  * @param controlName the name of the kendo control (kendoGrid, kendoButton)\n  */\n  getGeneratedProperties(controlName: string) {\n    if (!bindables[controlName]) {\n      throw new Error(`${controlName} not found in generated bindables.js`);\n    }\n\n    return bindables[controlName];\n  }\n\n  /*\n  * returns the intrinsic list of properties of a kendo control\n  * returns an empty array if the control is not loaded\n  * @param controlName the name of the kendo control (kendoGrid, kendoButton)\n  */\n  getWidgetProperties(controlName: string): string[] {\n    if (window.kendo && kendo.jQuery.fn[controlName]) {\n      return Object.keys(kendo.jQuery.fn[controlName].widget.prototype.options);\n    }\n\n    return [];\n  }\n\n  /*\n  * filters list of properties of a control by template property\n  * @param controlName the name of the kendo control (kendoGrid, kendoButton)\n  */\n  getTemplateProperties(controlName: string): string[] {\n    let properties = this.getProperties(controlName);\n\n    let templates = properties.filter(prop => this.util.isTemplateProperty(prop));\n\n    return templates;\n  }\n}\n"]}