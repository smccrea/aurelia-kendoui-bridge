{"version":3,"sources":["grid/col.js"],"names":["customElement","inject","constants","generateBindables","TemplateGatherer","OptionsBuilder","Util","Col","elementPrefix","Element","templateGatherer","optionsBuilder","util","element","bind","$parent","beforeOptionsBuild","templates","getChildrenVMs","useTemplates","afterOptionsBuild","options","columns","length","forEach","push","getOptions","col","editor","commands","command","c","click"],"mappings":";;;;;;;;;;;;;AAAQA,mB,sBAAAA,a;;AACAC,Y,+BAAAA,M;;AACAC,e,oBAAAA,S;;AACAC,uB,qBAAAA,iB;;AACAC,sB,2BAAAA,gB;;AACAC,oB,yBAAAA,c;;AACAC,U,eAAAA,I;;;qBAKKC,G,WAHZP,cAAiBE,UAAUM,aAA3B,S,UACAL,kBAAkB,YAAlB,C,UACAF,OAAOG,gBAAP,EAAyBC,cAAzB,EAAyCC,IAAzC,EAA+CG,OAA/C,C;AAEC,qBAAYC,gBAAZ,EAA8BC,cAA9B,EAA8CC,IAA9C,EAAoDC,OAApD,EAA6D;AAAA;;AAC3D,eAAKH,gBAAL,GAAwBA,gBAAxB;AACA,eAAKC,cAAL,GAAsBA,cAAtB;AACA,eAAKC,IAAL,GAAYA,IAAZ;AACA,eAAKC,OAAL,GAAeA,OAAf;AACD;;sBAEDC,I,iBAAKC,O,EAAS;AACZ,eAAKA,OAAL,GAAeA,OAAf;AACD,S;;sBAEDC,kB,iCAAqB;AACnB,cAAIC,YAAY,KAAKL,IAAL,CAAUM,cAAV,CAAyB,KAAKL,OAA9B,EAA0CX,UAAUM,aAApD,cAAhB;AACA,eAAKE,gBAAL,CAAsBS,YAAtB,CAAmC,IAAnC,EAAyC,YAAzC,EAAuDF,SAAvD;AACD,S;;sBAGDG,iB,8BAAkBC,O,EAAS;AAAA;;AACzB,cAAIC,UAAU,KAAKV,IAAL,CAAUM,cAAV,CAAyB,KAAKL,OAA9B,EAA0CX,UAAUM,aAApD,SAAd;AACA,cAAIc,WAAWA,QAAQC,MAAR,GAAiB,CAAhC,EAAmC;AACjCF,oBAAQC,OAAR,GAAkB,EAAlB;;AAEAA,oBAAQE,OAAR,CAAgB,eAAO;AACrBH,sBAAQC,OAAR,CAAgBG,IAAhB,CAAqB,MAAKd,cAAL,CAAoBe,UAApB,CAA+BC,GAA/B,EAAoC,YAApC,CAArB;AACD,aAFD;AAGD;;AAED,cAAIN,QAAQO,MAAZ,EAAoB;AAClBP,oBAAQO,MAAR,GAAiBP,QAAQO,MAAR,CAAed,IAAf,CAAoB,KAAKC,OAAzB,CAAjB;AACD;;AAED,cAAIc,WAAW,KAAKjB,IAAL,CAAUM,cAAV,CAAyB,KAAKL,OAA9B,EAA0CX,UAAUM,aAApD,kBAAf;AACA,cAAIqB,YAAYA,SAASN,MAAT,GAAkB,CAAlC,EAAqC;AACnCF,oBAAQS,OAAR,GAAkB,EAAlB;;AAEAD,qBAASL,OAAT,CAAiB,mBAAW;AAC1B,kBAAIO,IAAI,MAAKpB,cAAL,CAAoBe,UAApB,CAA+BI,OAA/B,EAAwC,uBAAxC,CAAR;;AAEA,kBAAIC,EAAEC,KAAN,EAAa;AACXD,kBAAEC,KAAF,GAAUD,EAAEC,KAAF,CAAQlB,IAAR,CAAa,MAAKC,OAAlB,CAAV;AACD;;AAEDM,sBAAQS,OAAR,CAAgBL,IAAhB,CAAqBM,CAArB;AACD,aARD;AASD;AACF,S","file":"grid/col.js","sourceRoot":"/source/","sourcesContent":["import {customElement} from 'aurelia-templating';\r\nimport {inject} from 'aurelia-dependency-injection';\r\nimport {constants} from '../common/constants';\r\nimport {generateBindables} from '../common/decorators';\r\nimport {TemplateGatherer} from '../common/template-gatherer';\r\nimport {OptionsBuilder} from '../common/options-builder';\r\nimport {Util} from '../common/util';\r\n\r\n@customElement(`${constants.elementPrefix}col`)\r\n@generateBindables('GridColumn')\r\n@inject(TemplateGatherer, OptionsBuilder, Util, Element)\r\nexport class Col {\r\n  constructor(templateGatherer, optionsBuilder, util, element) {\r\n    this.templateGatherer = templateGatherer;\r\n    this.optionsBuilder = optionsBuilder;\r\n    this.util = util;\r\n    this.element = element;\r\n  }\r\n\r\n  bind($parent) {\r\n    this.$parent = $parent;\r\n  }\r\n\r\n  beforeOptionsBuild() {\r\n    let templates = this.util.getChildrenVMs(this.element, `${constants.elementPrefix}template`);\r\n    this.templateGatherer.useTemplates(this, 'GridColumn', templates);\r\n  }\r\n\r\n  // recursively get options of all nested columns that we can pass to Kendo\r\n  afterOptionsBuild(options) {\r\n    let columns = this.util.getChildrenVMs(this.element, `${constants.elementPrefix}col`);\r\n    if (columns && columns.length > 0) {\r\n      options.columns = [];\r\n\r\n      columns.forEach(col => {\r\n        options.columns.push(this.optionsBuilder.getOptions(col, 'GridColumn'));\r\n      });\r\n    }\r\n\r\n    if (options.editor) {\r\n      options.editor = options.editor.bind(this.$parent);\r\n    }\r\n\r\n    let commands = this.util.getChildrenVMs(this.element, `${constants.elementPrefix}grid-command`);\r\n    if (commands && commands.length > 0) {\r\n      options.command = [];\r\n\r\n      commands.forEach(command => {\r\n        let c = this.optionsBuilder.getOptions(command, 'GridColumnCommandItem');\r\n\r\n        if (c.click) {\r\n          c.click = c.click.bind(this.$parent);\r\n        }\r\n\r\n        options.command.push(c);\r\n      });\r\n    }\r\n  }\r\n}\r\n"]}